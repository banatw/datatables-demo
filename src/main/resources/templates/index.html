<#import "/spring.ftl" as spring />
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title></title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="" />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.css"
    />
  </head>
  <body>
    <!--[if lt IE 7]>
      <p class="browsehappy">
        You are using an <strong>outdated</strong> browser. Please
        <a href="#">upgrade your browser</a> to improve your experience.
      </p>
    <![endif]-->
    <div>
      <a href="<@spring.url '/logout' />">Logout</a>
    </div>
    <div>
      <a href="<@spring.url '/form' />">Add</a>
    </div>
    <table id="tes" class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>NAMA</th>
          <th>ADDRESS</th>
          <th>ACTION</th>
        </tr>
      </thead>
    </table>
    <script
      src="https://code.jquery.com/jquery-3.6.0.js"
      integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
      crossorigin="anonymous"
    ></script>
    <script
      type="text/javascript"
      charset="utf8"
      src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"
    ></script>

    <script>
      const table = $("#tes").DataTable({
        processing: true,
        serverSide: true,
        ajax: "<@spring.url '/mahasiswas' />",
        dataSrc: "",
        searching: true,
        lengthChange: false,
        pageLength: 10,
        columns: [
          { data: "nama" },
          { data: "address" },
          {
            data: "idMahasiswa",
            render: function (data) {
              return (
                '<a href="<@spring.url "/form?id=" />' +
                data +
                '">Edit</a>&nbsp;&nbsp;&nbsp;<a href="#" onClick=tes(' +
                data +
                ') ">Delete</a>'
              );
            },
          },
        ],
      });

      function tes(param) {
        const result = window.confirm("Apakah ingin dihapus?");
        if (result) {
          window.location.href =
            "<@spring.url '/form-delete?id=" + param + "'/>";
        } else {
        }
        return false;
      }
    </script>
  </body>
</html>
